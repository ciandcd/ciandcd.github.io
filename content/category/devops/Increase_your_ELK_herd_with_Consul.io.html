<!DOCTYPE html>
    <html lang="zh-cn">
    <head>
    <meta charset="utf-8"/>
    <title>
    Increase your ELK herd with Consul.io</title><meta name="date" content="2015-05-18 00:00"/><meta name="tags" content="devops" /></head><body>From:<a href=http://blog.devopsguys.com/2015/05/18/increase-your-elk-herd-with-consul-io/>http://blog.devopsguys.com/2015/05/18/increase-your-elk-herd-with-consul-io/</a><br><br><div><p class="reblog-from"><img alt="" src="http://0.gravatar.com/avatar/91f3566a38a35d6b2ed4c7b4b0d5e3d2?s=48&amp;d=identicon&amp;r=G" class="avatar avatar-48" height="48" width="48">Originally posted on <a href="http://doics.co/2015/05/18/increase-your-elk-herd-with-consul-io">DevOps Is Common Sense...</a>:</p><p>At work, I recently had a need to put in place a scalable logging solution based around the ELK stack.</p>

<p><a href="http://elasticsearch-users.115913.n3.nabble.com/Java-client-unable-to-connect-ClusterBlockException-td4019825.html" title="Elasticsearch Users Mailing List">Issues</a><a href="https://community.rackspace.com/products/f/18/t/4055" title="Rackspace Community Forums">with</a><a href="http://jontai.me/blog/2013/03/elasticsearch-ec2-discovery/" title="How to get Elasticsearch configured in AWS">Multicast</a><a href="http://elasticsearch-users.115913.n3.nabble.com/discovery-multicast-vs-unicast-td3689223.html" title="Elasticsearch Users &amp;quot;Should I use Multicast or Unicast?&amp;quot;">networking</a> aside, &#160;Elasticsearch scales pretty well on its own without the need for any additional overheads, however&#160;discovering whether a node is online or not and connecting only to available nodes can be tricky.</p>

<p>Scaling Logstash can be tricky, but it basically involves <a href="http://serverfault.com/questions/459303/scaling-logstash-with-redis-elasticsearch" title="Advice on scaling Logstash from Stack Overflow">adding more Logstash servers</a> to the mix and pointing them at your Elasticsearch cluster by <a href="http://www.elastic.co/guide/en/logstash/current/plugins-outputs-elasticsearch.html#plugins-outputs-elasticsearch-host" title="Logstash Documentation on adding multiple hosts">defining multiple hosts</a> in your Logstash configuration.</p>

<p>Kibana (like most web applications) can <a href="http://www.elastic.co/guide/en/kibana/current/_setting_kibana_server_properties.html" title="Kibana Documentation">only have one Elasticsearch host defined</a> in the config, so scaling out Kibana is more difficult.</p>

<p>The above raises the question &#8211; how do I know&#160;which Elasticsearch node to point my configuration at if I don&#8217;t know whether they are there or not.</p>

<p>The answer came in the form of <a href="http://consul.io/" title="Consul.io's Home Page">consul.io</a>. &#160;If you&#8217;ve not looked at&#8230;</p>
</div></body></html>